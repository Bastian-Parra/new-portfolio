---
import { Icon } from "astro-icon/components";
import type { Database } from "../lib/database.types";

type Project = Database["public"]["Tables"]["projects"]["Row"];

interface Props {
  project: Project;
}

const { project } = Astro.props;
---

<article
  class="project-card w-full h-[150px] rounded-lg bg-surface border border-border-ui overflow-hidden relative cursor-pointer transition-all duration-500 ease-[cubic-bezier(0.23,1,0.320,1)] hover:scale-105 hover:shadow-[0_10px_20px_rgba(0,0,0,0.2)] hover:border-primary"
  style="transform-style: preserve-3d; perspective: 1000px;"
>
  <div
    class="card-content relative z-10 p-5 flex flex-col gap-2.5 items-center justify-center text-left h-full"
  >
    <div class="flex justify-between w-full items-start">
      <a
        href={project.demo_url}
        target="_blank"
        rel="noopener noreferrer"
        class="text-md font-bold uppercase text-content flex items-center gap-2 hover:cursor-pointer hover:underline"
      >
        <Icon name="external-link" size={20} />
        {project.title}
      </a>
      <a
        href={project.github_url}
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center gap-1 text-content hover:underline hover:bg-primary/20 p-1 rounded-md"
      >
        <Icon name="github" size={28} />
      </a>
    </div>
    <p class="text-muted text-sm text-left">{project.description}</p>

    <div class="flex flex-wrap gap-2">
      {
        project.technologies.map((tech) => (
          <span class="text-xs bg-primary text-primary-fg px-2 py-1 rounded-md">
            {tech}
          </span>
        ))
      }
    </div>
  </div>
</article>

<style>
  .project-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.1));
    transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
    z-index: 1;
  }

  .project-card:hover::before {
    transform: translateX(-100%);
  }

  .project-card::after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.1));
    transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
    z-index: 1;
  }

  .project-card:hover::after {
    transform: translateX(100%);
  }

  .project-card:hover {
    transform: rotateY(10deg) rotateX(10deg) scale(1.05);
  }
</style>
